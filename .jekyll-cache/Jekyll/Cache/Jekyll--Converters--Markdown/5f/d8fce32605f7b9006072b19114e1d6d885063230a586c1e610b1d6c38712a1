I"—r<p>ä¸æ™®é€šçš„æ‰©æ•£ç ”ç©¶ä¸åŒï¼Œç½‘ç»œæ‰©æ•£å¼€å§‹è€ƒè™‘ç½‘ç»œç»“æ„å¯¹äºæ‰©æ•£è¿‡ç¨‹çš„å½±å“ã€‚</p>

<p>è¿™é‡Œä»‹ç»ä¸€ä¸ªä½¿ç”¨Ræ¨¡æ‹Ÿç½‘ç»œæ‰©æ•£çš„ä¾‹å­ã€‚åŸºæœ¬çš„ç®—æ³•éå¸¸ç®€å•ï¼š</p>

<ol>
  <li>ç”Ÿæˆä¸€ä¸ªç½‘ç»œ:g(V, E)ã€‚</li>
  <li>éšæœºé€‰æ‹©ä¸€ä¸ªæˆ–å‡ ä¸ªèŠ‚ç‚¹ä½œä¸ºç§å­ï¼ˆseedsï¼‰ã€‚</li>
  <li>æ¯ä¸ªæ„ŸæŸ“è€…ä»¥æ¦‚ç‡pï¼ˆå¯è§†ä½œè¯¥èŠ‚ç‚¹çš„ä¼ æŸ“èƒ½åŠ›,é€šå¸¸è¡¨ç¤ºä¸º$\beta$ï¼‰å½±å“ä¸å…¶ç›¸è¿çš„èŠ‚ç‚¹ã€‚</li>
</ol>

<p>å…¶å®è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„SIæ¨¡å‹åœ¨ç½‘ç»œä¸­çš„å®ç°ã€‚Sè¡¨ç¤ºå¯æ„ŸæŸ“ï¼ˆsusceptibleï¼‰, Iè¡¨ç¤ºè¢«æ„ŸæŸ“ï¼ˆinfectedï¼‰ã€‚SIæ¨¡å‹æè¿°äº†ä¸ªä½“çš„çŠ¶æ€ä»Såˆ°Iä¹‹é—´çš„è½¬å˜ã€‚å› ä¸ºå½¢å¼ç®€å•ï¼ŒSIæ¨¡å‹æ˜¯å¯ä»¥æ±‚å‡ºå…¶è§£æè§£çš„ã€‚è€ƒè™‘ä¸€ä¸ªå°é—­çš„ç¾¤ä½“ï¼Œæ²¡æœ‰å‡ºç”Ÿã€æ­»äº¡å’Œè¿ç§»ã€‚å¹¶å‡è®¾ä¸ªä½“æ˜¯å‡åŒ€æ··åˆçš„ï¼ˆhomogeneous mixing),ä¹Ÿå°±æ˜¯è¦æ±‚ä¸ªä½“çš„åœ°ç†åˆ†å¸ƒå‡åŒ€ï¼Œä¸”è¢«æ„ŸæŸ“çš„æ¦‚ç‡ä¹Ÿç›¸åŒ(T. G. Lewis, 2011)ã€‚é‚£ä¹ˆÎ²è¡¨ç¤ºä¼ æŸ“ç‡ï¼ˆtransmission rate)ã€‚SIæ¨¡å‹å¯ä»¥è¡¨è¾¾ä¸ºï¼š</p>

\[\frac{dS}{dt}=-\beta SI\]

\[\frac{dI}{dt}=\beta SI\]

<p>ä¸”æ»¡è¶³ I + S = 1ï¼Œé‚£ä¹ˆä»¥ä¸Šæ–¹ç¨‹\(\frac{dI}{dt}=\beta SI\)å¯ä»¥è¡¨è¾¾ä¸ºï¼š</p>

\[\frac{dI}{dt}=\beta I(1-I)\]

<p>è§£è¿™ä¸ªå¾®åˆ†æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç´¯è®¡å¢é•¿æ›²çº¿çš„è¡¨è¾¾å¼ã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªlogisticå¢é•¿ï¼Œå…·æœ‰æ˜æ˜¾çš„Så‹æ›²çº¿ï¼ˆS-shaped curveï¼‰ç‰¹å¾ã€‚è¯¥æ¨¡å‹åœ¨åˆæœŸè·¨è¶Šä¸´ç•Œç‚¹ä¹‹åå¢é•¿è¾ƒå¿«ï¼ŒåæœŸåˆ™å˜å¾—ç¼“æ…¢ã€‚ å› è€Œå¯ä»¥ç”¨æ¥æè¿°å’Œæ‹Ÿåˆåˆ›æ–°æ‰©æ•£è¿‡ç¨‹ï¼ˆdiffusion of innovationsï¼‰ã€‚</p>

<p>å½“ç„¶ï¼Œå¯¹ç–¾ç—…ä¼ æ’­è€Œè¨€ï¼ŒSIæ¨¡å‹æ˜¯éå¸¸åˆçº§çš„ï¼ˆnaiveï¼‰ï¼Œä¸»è¦å› ä¸ºå—æ„ŸæŸ“çš„ä¸ªä½“ä»¥ä¸€å®šçš„æ¦‚ç‡æ¢å¤å¥åº·ï¼Œæˆ–è€…ç»§ç»­è¿›å…¥å¯ä»¥è¢«æ„ŸæŸ“çŠ¶æ€(Sï¼Œæ®æ­¤æ‰©å±•ä¸ºSISæ¨¡å‹)æˆ–è€…è½¬ä¸ºå…ç–«çŠ¶æ€ï¼ˆR,æ®æ­¤æ‰©å±•ä¸ºSIRæ¨¡å‹ï¼‰ã€‚ å…ç–«è¡¨ç¤ºä¸ºRï¼Œç”¨$\gamma$ä»£è¡¨å…ç–«æ¦‚ç‡ï¼ˆremoval or recovery rate)ã€‚å¯¹äºä¿¡æ¯æ‰©æ•£è€Œè¨€ï¼Œè¿™ç§è€ƒè™‘æš‚æ—¶æ˜¯ä¸éœ€è¦çš„ã€‚</p>

<p>ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆç½‘ç»œã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">require</span><span class="p">(</span><span class="n">igraph</span><span class="p">)</span>
<span class="c1"># generate a social graph
</span><span class="n">size</span> <span class="o">=</span> <span class="mi">50</span>

<span class="c1"># è§„åˆ™ç½‘
</span><span class="n">g</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">tree</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">children</span> <span class="o">=</span> <span class="mi">2</span><span class="p">);</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">star</span><span class="p">(</span><span class="n">size</span><span class="p">);</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">full</span><span class="p">(</span><span class="n">size</span><span class="p">);</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">ring</span><span class="p">(</span><span class="n">size</span><span class="p">);</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">connect</span><span class="p">.</span><span class="n">neighborhood</span><span class="p">(</span><span class="n">graph</span><span class="p">.</span><span class="n">ring</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="c1"># æœ€è¿‘é‚»è€¦åˆç½‘ç»œ
</span>
<span class="c1"># éšæœºç½‘ç»œ
</span><span class="n">g</span> <span class="o">=</span> <span class="n">erdos</span><span class="p">.</span><span class="n">renyi</span><span class="p">.</span><span class="n">game</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># å°ä¸–ç•Œç½‘ç»œ
</span><span class="n">g</span> <span class="o">=</span> <span class="n">rewire</span><span class="p">.</span><span class="n">edges</span><span class="p">(</span><span class="n">erdos</span><span class="p">.</span><span class="n">renyi</span><span class="p">.</span><span class="n">game</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="p">)</span>
<span class="c1"># æ— æ ‡åº¦ç½‘ç»œ
</span><span class="n">g</span> <span class="o">=</span> <span class="n">barabasi</span><span class="p">.</span><span class="n">game</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="p">;</span> <span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</code></pre></div></div>

<p>ç¬¬äºŒæ­¥ï¼Œéšæœºé€‰å–ä¸€ä¸ªæˆ–nä¸ªç§å­ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#  initiate the diffusers
</span><span class="n">seeds_num</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">set</span><span class="p">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">2014</span><span class="p">);</span> <span class="n">diffusers</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="n">seeds_num</span><span class="p">)</span> <span class="p">;</span> <span class="n">diffusers</span>
<span class="n">infected</span> <span class="o">=</span><span class="nb">list</span><span class="p">()</span>
<span class="n">infected</span><span class="p">[[</span><span class="mi">1</span><span class="p">]]</span><span class="o">=</span> <span class="n">diffusers</span>
</code></pre></div></div>

<p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ä¼ æŸ“èƒ½åŠ›æ˜¯0.5ï¼Œå³ä¸å…¶ç›¸è¿çš„èŠ‚ç‚¹ä»¥0.5çš„æ¦‚ç‡è¢«å…¶æ„ŸæŸ“ã€‚åœ¨Rä¸­çš„å®ç°æ˜¯é€šè¿‡æŠ›ç¡¬å¸çš„æ–¹å¼æ¥å®ç°çš„ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># for example, set percolation probability = 0.5
</span><span class="n">coins</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">coins</span><span class="p">)</span>
<span class="n">sample</span><span class="p">(</span><span class="n">coins</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="n">rep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
</code></pre></div></div>

<p>æ˜¾ç„¶ï¼Œè¿™å¾ˆå®¹æ˜“æ‰©å±•åˆ°æ›´ä¸€èˆ¬çš„æƒ…å†µï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¹³å‡æ„ŸæŸ“èƒ½åŠ›æ˜¯0.128ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">p</span> <span class="o">=</span> <span class="mf">0.128</span>
<span class="n">coins</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="n">rep</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">*</span><span class="mi">1000</span><span class="p">),</span> <span class="n">rep</span><span class="p">(</span><span class="mi">0</span><span class="p">,(</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">coins</span><span class="p">)</span>
<span class="n">sample</span><span class="p">(</span><span class="n">coins</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="n">rep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
</code></pre></div></div>

<p>å½“ç„¶æœ€é‡è¦çš„ä¸€æ­¥æ˜¯è¦èƒ½æŒ‰ç…§â€œæ—¶é—´â€æ›´æ–°ç½‘ç»œèŠ‚ç‚¹è¢«æ„ŸæŸ“çš„ä¿¡æ¯ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># function for updating the diffusers
</span><span class="n">update_diffusers</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">diffusers</span><span class="p">){</span>
  <span class="n">nearest_neighbors</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">diffusers</span><span class="p">)</span>
  <span class="n">nearest_neighbors</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">nearest_neighbors</span><span class="p">)))</span>
  <span class="n">nearest_neighbors</span> <span class="o">=</span> <span class="n">subset</span><span class="p">(</span><span class="n">nearest_neighbors</span><span class="p">,</span> <span class="err">!</span><span class="p">(</span><span class="n">nearest_neighbors</span><span class="p">[,</span><span class="mi">1</span><span class="p">]</span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="n">diffusers</span><span class="p">))</span>
  <span class="c1"># toss the coins
</span>  <span class="n">toss</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">tossing</span> <span class="o">=</span> <span class="n">NULL</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">:</span><span class="n">freq</span> <span class="p">)</span> <span class="n">tossing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="n">coins</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">TRUE</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="n">rep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="n">n</span><span class="p">))</span>
	<span class="n">tossing</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">tossing</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">tossing</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="n">keep</span> <span class="o">=</span> <span class="n">unlist</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="n">nearest_neighbors</span><span class="p">[,</span><span class="mi">2</span><span class="p">],</span> <span class="n">toss</span><span class="p">))</span>
  <span class="n">new_infected</span> <span class="o">=</span> <span class="k">as</span><span class="p">.</span><span class="n">numeric</span><span class="p">(</span><span class="k">as</span><span class="p">.</span><span class="n">character</span><span class="p">(</span><span class="n">nearest_neighbors</span><span class="p">[,</span><span class="mi">1</span><span class="p">][</span><span class="n">keep</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">]))</span>
  <span class="n">diffusers</span> <span class="o">=</span> <span class="n">unique</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="n">diffusers</span><span class="p">,</span> <span class="n">new_infected</span><span class="p">))</span>
  <span class="k">return</span><span class="p">(</span><span class="n">diffusers</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>å®Œæˆäº†ä»¥ä¸Šä¸‰æ­¥ã€‚å‡†å¤‡å¥½äº†å—ï¼Œç°åœ¨å¼€å§‹å¼€å¯æ‰©æ•£è¿‡ç¨‹ï¼</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Start the contagion!
</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="p">[[</span><span class="n">i</span><span class="p">]])</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">){</span>
  <span class="n">infected</span><span class="p">[[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">update_diffusers</span><span class="p">(</span><span class="n">infected</span><span class="p">[[</span><span class="n">i</span><span class="p">]]))</span>
  <span class="n">cat</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="p">[[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]),</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
  <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å…ˆçœ‹çœ‹Sæ›²çº¿å§ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># "growth_curve"
</span><span class="n">num_cum</span> <span class="o">=</span> <span class="n">unlist</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">i</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="err">ï¼»</span><span class="n">x</span><span class="err">ï¼½</span><span class="p">)</span> <span class="p">))</span>
<span class="n">p_cum</span> <span class="o">=</span> <span class="n">num_cum</span><span class="o">/</span><span class="nb">max</span><span class="p">(</span><span class="n">num_cum</span><span class="p">)</span>
<span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">i</span>

<span class="n">png</span><span class="p">(</span><span class="nb">file</span> <span class="o">=</span> <span class="s">"./temporal_growth_curve.png"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
	<span class="n">units</span><span class="o">=</span><span class="s">"in"</span><span class="p">,</span> <span class="n">res</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">p_cum</span><span class="o">~</span><span class="n">time</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">"b"</span><span class="p">)</span>
<span class="n">dev</span><span class="p">.</span><span class="n">off</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="http://farm8.staticflickr.com/7299/12845959103_e19cd9cd99_n.jpg" alt="" /></p>

<p>ä¸ºäº†å¯è§†åŒ–è¿™ä¸ªæ‰©æ•£çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç”¨çº¢è‰²æ¥æ ‡è®°è¢«æ„ŸæŸ“è€…ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># generate a palette
</span><span class="n">E</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span> <span class="o">=</span> <span class="s">"blueviolet"</span>
<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span> <span class="o">=</span> <span class="s">"white"</span>
<span class="nb">set</span><span class="p">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">2014</span><span class="p">);</span> <span class="n">layout</span><span class="p">.</span><span class="n">old</span> <span class="o">=</span> <span class="n">layout</span><span class="p">.</span><span class="n">fruchterman</span><span class="p">.</span><span class="n">reingold</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span><span class="p">[</span><span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="n">diffusers</span><span class="p">]</span> <span class="o">=</span> <span class="s">"red"</span>
<span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span><span class="n">layout</span><span class="p">.</span><span class="n">old</span><span class="p">)</span>
</code></pre></div></div>

<p>ä½¿ç”¨è°¢ç›Šè¾‰å¼€å‘çš„animationçš„RåŒ…å¯è§†åŒ–ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">animation</span><span class="p">)</span>

<span class="n">saveGIF</span><span class="p">({</span>
  <span class="n">ani</span><span class="p">.</span><span class="n">options</span><span class="p">(</span><span class="n">interval</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="n">shQuote</span><span class="p">(</span><span class="s">"C:/Program Files/ImageMagick-6.8.8-Q16/convert.exe"</span><span class="p">))</span>
  <span class="c1"># start the plot
</span>  <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="k">while</span><span class="p">(</span><span class="n">m</span> <span class="o">&lt;=</span> <span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="p">)){</span>
	<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span> <span class="o">=</span> <span class="s">"white"</span>
	<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span><span class="p">[</span><span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="n">infected</span><span class="p">[[</span><span class="n">m</span><span class="p">]]]</span> <span class="o">=</span> <span class="s">"red"</span>
	<span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span><span class="n">layout</span><span class="p">.</span><span class="n">old</span><span class="p">)</span>
	<span class="n">m</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p><img src="http://farm4.staticflickr.com/3806/12826172695_368a6f50a2_o.gif" alt="" /></p>

<p><img src="http://farm3.staticflickr.com/2848/12826237753_d8c97b1019_o.gif" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3729/12826584654_c84452f397_o.gif" alt="" /></p>

<p><img src="http://farm3.staticflickr.com/2851/12826173505_34649f488d_o.gif" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7391/12826173255_574e471023_o.gif" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3675/12826584484_7c6f35380c_o.gif" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7432/12826173045_ef3548ec04_o.gif" alt="" /></p>

<p>å¦‚åŒåœ¨Netlogoé‡Œä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç½‘ç»œæ‰©æ•£ä¸å¢é•¿æ›²çº¿åŒæ—¶å±•ç¤ºå‡ºæ¥ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">saveGIF</span><span class="p">({</span>
  <span class="n">ani</span><span class="p">.</span><span class="n">options</span><span class="p">(</span><span class="n">interval</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="n">shQuote</span><span class="p">(</span><span class="s">"C:/Program Files/ImageMagick-6.8.8-Q16/convert.exe"</span><span class="p">))</span>
  <span class="c1"># start the plot
</span>  <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="k">while</span><span class="p">(</span><span class="n">m</span> <span class="o">&lt;=</span> <span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="p">)){</span>
	<span class="c1"># start the plot
</span>	<span class="n">layout</span><span class="p">(</span><span class="n">matrix</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">byrow</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">),</span> <span class="n">widths</span><span class="o">=</span><span class="n">c</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">heights</span><span class="o">=</span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
	<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span> <span class="o">=</span> <span class="s">"white"</span>
	<span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="err">$</span><span class="n">color</span><span class="p">[</span><span class="n">V</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="n">infected</span><span class="p">[[</span><span class="n">m</span><span class="p">]]]</span> <span class="o">=</span> <span class="s">"red"</span>
	<span class="n">num_cum</span> <span class="o">=</span> <span class="n">unlist</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">m</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">length</span><span class="p">(</span><span class="n">infected</span><span class="p">[[</span><span class="n">x</span><span class="p">]])</span> <span class="p">))</span>
	<span class="n">p_cum</span> <span class="o">=</span> <span class="n">num_cum</span><span class="o">/</span><span class="n">size</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">diff</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p_cum</span><span class="p">))</span>
	<span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">m</span>
	<span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span><span class="n">layout</span><span class="p">.</span><span class="n">old</span><span class="p">,</span> <span class="n">edge</span><span class="p">.</span><span class="n">arrow</span><span class="p">.</span><span class="n">size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
	<span class="n">title</span><span class="p">(</span><span class="n">paste</span><span class="p">(</span><span class="s">"Scale-free Network </span><span class="se">\n</span><span class="s"> Day"</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
	<span class="n">plot</span><span class="p">(</span><span class="n">p_cum</span><span class="o">~</span><span class="n">time</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">"b"</span><span class="p">,</span> <span class="n">ylab</span> <span class="o">=</span> <span class="s">"CDF"</span><span class="p">,</span> <span class="n">xlab</span> <span class="o">=</span> <span class="s">"Time"</span><span class="p">,</span>
		 <span class="n">xlim</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">),</span> <span class="n">ylim</span> <span class="o">=</span><span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
	<span class="n">plot</span><span class="p">(</span><span class="n">p</span><span class="o">~</span><span class="n">time</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="s">"h"</span><span class="p">,</span> <span class="n">ylab</span> <span class="o">=</span> <span class="s">"PDF"</span><span class="p">,</span> <span class="n">xlab</span> <span class="o">=</span> <span class="s">"Time"</span><span class="p">,</span>
		 <span class="n">xlim</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">),</span> <span class="n">ylim</span> <span class="o">=</span><span class="n">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">frame</span><span class="p">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">)</span>
	<span class="n">m</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">},</span> <span class="n">ani</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">800</span><span class="p">,</span> <span class="n">ani</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">500</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="http://farm4.staticflickr.com/3672/12848749413_7f9da8b8c7_o.gif" alt="" /></p>
:ET